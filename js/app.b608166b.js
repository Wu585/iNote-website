(function(t){function e(e){for(var n,i,a=e[0],c=e[1],u=e[2],l=0,f=[];l<a.length;l++)i=a[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],n=!0,a=1;a<o.length;a++){var c=o[a];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/iNote-website/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var d=c;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},"0be3":function(t,e,o){"use strict";o("6182")},"0f9b":function(t,e,o){},"219b":function(t,e,o){},"267d":function(t,e,o){"use strict";o("fec6")},"47dc":function(t,e,o){"use strict";o("0f9b")},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("Sidebar"),o("router-view")],1)},s=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"sidebar"}},[o("Avatar"),o("div",{staticClass:"icons"},[o("router-link",{attrs:{to:"/note",title:"笔记"}},[o("i",{staticClass:"iconfont icon-note"})]),o("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[o("i",{staticClass:"iconfont icon-notebook"})]),o("router-link",{attrs:{to:"/trash",title:"回收站"}},[o("i",{staticClass:"iconfont icon-trash"})])],1),o("div",{staticClass:"logout",on:{click:t.logout}},[o("i",{staticClass:"iconfont icon-logout"})])],1)},a=[],c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{attrs:{title:t.username}},[t._v(t._s(t.slug))])},u=[],d=o("5530"),l=o("2f62"),f={data:function(){return{}},created:function(){this.checkLogin()},computed:Object(d["a"])({},Object(l["c"])(["username","slug"])),methods:Object(d["a"])({},Object(l["b"])(["checkLogin"]))},h=f,p=(o("f12b"),o("2877")),v=Object(p["a"])(h,c,u,!1,null,"a35474d4",null),m=v.exports,g=(o("d3b7"),o("bc3a")),b=o.n(g),k=o("5c96"),N=o.n(k);function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(n,r){var s={url:t,method:e,validateStatus:function(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?s.params=o:s.data=o,b()(s).then((function(t){200===t.status?n(t.data):"缺少 notebookId 参数或者 notebookId 无效"===t.data.msg?console.log(t.data.msg):(k["Message"].error(t.data.msg),r(t.data))})).catch((function(){r({msg:"网络异常"})}))}))}b.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",b.a.defaults.baseURL="https://note-server.hunger-valley.com",b.a.defaults.withCredentials=!0;var _={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"},I={register:function(t){var e=t.username,o=t.password;return w(_.REGISTER,"POST",{username:e,password:o})},login:function(t){var e=t.username,o=t.password;return w(_.LOGIN,"POST",{username:e,password:o})},logout:function(){return w(_.LOGOUT)},getInfo:function(){return w(_.GET_INFO)}},C={components:{Avatar:m},methods:{logout:function(){var t=this;I.logout().then((function(e){console.log(e),t.$router.push("/login")}))}}},T=C,E=(o("59c9"),Object(p["a"])(T,i,a,!1,null,"f1af9c8c",null)),y=E.exports,O={components:{Sidebar:y}},j=O,A=(o("034f"),Object(p["a"])(j,r,s,!1,null,null,null)),x=A.exports,P=o("9483");Object(P["a"])("".concat("/iNote-website/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});o("ac1f");var B=o("8c4f"),$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"login"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container"},[t._m(0),o("div",{staticClass:"form"},[o("h3",{on:{click:t.showRegister}},[t._v("创建账户")]),o("transition",{attrs:{name:"slide"}},[o("div",{staticClass:"register",class:{show:t.isShowRegister}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.register.username,expression:"register.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:t.register.username},on:{input:function(e){e.target.composing||t.$set(t.register,"username",e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.register.password,expression:"register.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.register.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onRegister.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.register,"password",e.target.value)}}}),o("p",{class:{error:t.register.isError}},[t._v(" "+t._s(t.register.notice))]),o("div",{staticClass:"button",on:{click:t.onRegister}},[t._v("创建账号")])])]),o("h3",{on:{click:t.showLogin}},[t._v("登录")]),o("transition",{attrs:{name:"slide"}},[o("div",{staticClass:"login",class:{show:t.isShowLogin}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.username,expression:"login.username"}],attrs:{type:"text",placeholder:"输入用户名"},domProps:{value:t.login.username},on:{input:function(e){e.target.composing||t.$set(t.login,"username",e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.password,expression:"login.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.login.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onLogin.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.login,"password",e.target.value)}}}),o("p",{class:{error:t.login.isError}},[t._v(" "+t._s(t.login.notice))]),o("div",{staticClass:"button",on:{click:t.onLogin}},[t._v(" 登录")])])])],1)])])])])},L=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("img",{attrs:{src:o("7d2c"),alt:""}})])}];o("99af");I.getInfo().then((function(t){console.log(t)}));var S={data:function(){return{isShowLogin:!0,isShowRegister:!1,login:{username:"",password:"",notice:"输入用户名和密码",isError:!1},register:{username:"",password:"",notice:"创建账号后，请记住用户名和密码",isError:!1}}},methods:Object(d["a"])(Object(d["a"])({},Object(l["b"])({loginUser:"login",registerUser:"register"})),{},{showLogin:function(){this.isShowLogin=!0,this.isShowRegister=!1},showRegister:function(){this.isShowLogin=!1,this.isShowRegister=!0},onRegister:function(){return/^[\w\u4e00-\u9fa5]{3,15}$/.test(this.register.username)?/^.{6,16}$/.test(this.register.password)?(this.register.isError=!1,this.register.notice="",console.log("start register..., username: ".concat(this.register.username," , password: ").concat(this.register.password)),void this.registerUser({username:this.register.username,password:this.register.password})):(this.register.isError=!0,void(this.register.notice="密码长度为6~16个字符")):(this.register.isError=!0,void(this.register.notice="用户名3~15个字符，仅限于字母数字下划线中文"))},onLogin:function(){var t=this;return/^[\w\u4e00-\u9fa5]{3,15}$/.test(this.login.username)?/^.{6,16}$/.test(this.login.password)?(this.login.isError=!1,this.login.notice="",console.log("start login..., username: ".concat(this.login.username," , password: ").concat(this.login.password)),void this.loginUser({username:this.login.username,password:this.login.password}).then((function(){t.$router.push("/notebooks")}))):(this.login.isError=!0,void(this.login.notice="密码长度为6~16个字符")):(this.login.isError=!0,void(this.login.notice="用户名3~15个字符，仅限于字母数字下划线中文"))}})},D=S,R=(o("7d57"),Object(p["a"])(D,$,L,!1,null,null,null)),F=R.exports,U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail",attrs:{id:"notebook-list"}},[o("header",[o("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onCreate.apply(null,arguments)}}},[o("i",{staticClass:"iconfont icon-plus"}),t._v("新建笔记本")])]),o("main",[o("div",{staticClass:"layout"},[o("h3",[t._v("笔记本列表("+t._s(t.notebooks.length)+")")]),o("div",{staticClass:"book-list"},t._l(t.notebooks,(function(e){return o("router-link",{key:e.id,staticClass:"notebook",attrs:{to:"/note?notebookId="+e.id}},[o("div",[o("span",{staticClass:"iconfont icon-notebook"}),t._v(t._s(e.title)+" "),o("span",[t._v(t._s(e.noteCounts))]),o("span",{staticClass:"action",on:{click:function(o){return o.preventDefault(),o.stopPropagation(),t.onEdit(e)}}},[t._v("编辑")]),o("span",{staticClass:"action",on:{click:function(o){return o.preventDefault(),o.stopPropagation(),t.onDelete(e)}}},[t._v("删除")]),o("span",{staticClass:"date"},[t._v(t._s(e.createdAtFriendly))])])])})),1)])])])},G=[],M={data:function(){return{}},created:function(){var t=this;I.getInfo().then((function(e){e.isLogin||t.$router.push("/login")})),this.$store.dispatch("getNotebooks")},computed:Object(d["a"])({},Object(l["c"])(["notebooks"])),methods:Object(d["a"])(Object(d["a"])({},Object(l["b"])(["getNotebooks","addNotebook","updateNotebook","deleteNotebook","checkLogin"])),{},{onCreate:function(){var t=this;this.$prompt("请输入笔记本标题","创建笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,30}$/,inputErrorMessage:"标题不能为空，且不能超过30个字符"}).then((function(e){var o=e.value;t.addNotebook({title:o})}))},onEdit:function(t){var e=this;this.$prompt("请输入新笔记本标题","修改笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,30}$/,inputValue:t.title,inputErrorMessage:"标题不能为空，且不能超过30个字符"}).then((function(o){var n=o.value;e.updateNotebook({notebookId:t.id,title:n})}))},onDelete:function(t){var e=this;this.$confirm("确认要删除笔记吗？","删除笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteNotebook({notebookId:t.id})}))}})},q=M,H=(o("95df"),Object(p["a"])(q,U,G,!1,null,"1ce6cf96",null)),V=H.exports,J=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail",attrs:{id:"note"}},[o("NoteSideBar",{on:{"update:notes":function(e){return t.notes=e}}}),o("div",{staticClass:"note-detail"},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.curBook.id,expression:"!curBook.id"}],staticClass:"note-empty"},[t._v(" 请先添加笔记本后 ")]),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.curNote.id,expression:"!curNote.id"}],staticClass:"note-empty"},[t._v(" 选择或创建笔记 ")]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.curNote.id,expression:"curNote.id"}],staticClass:"note-detail-ct"},[o("div",{staticClass:"note-bar"},[o("span",[t._v("创建日期："+t._s(t.curNote.createdAtFriendly))]),o("span",[t._v("更新日期："+t._s(t.curNote.updatedAtFriendly))]),o("span",[t._v(t._s(t.statusText))]),o("span",{staticClass:"iconfont icon-delete",on:{click:t.onDeleteNote}}),o("span",{staticClass:"iconfont icon-fullscreen",on:{click:function(e){t.isShowPreview=!t.isShowPreview}}})]),o("div",{staticClass:"note-title"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.curNote.title,expression:"curNote.title"}],attrs:{type:"text",placeholder:"输入标题"},domProps:{value:t.curNote.title},on:{input:[function(e){e.target.composing||t.$set(t.curNote,"title",e.target.value)},t.onUpdateNote],keydown:function(e){t.statusText="正在输入"}}})]),o("div",{staticClass:"editor"},[o("textarea",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview,expression:"!isShowPreview"},{name:"model",rawName:"v-model",value:t.curNote.content,expression:"curNote.content"}],attrs:{placeholder:"输入内容，支持 markdown 语法"},domProps:{value:t.curNote.content},on:{keydown:function(e){t.statusText="正在输入"},input:[function(e){e.target.composing||t.$set(t.curNote,"content",e.target.value)},t.onUpdateNote]}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowPreview,expression:"isShowPreview"}],staticClass:"preview markdown-body",domProps:{innerHTML:t._s(t.previewContent)}})])])])],1)},z=[],K=(o("5319"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"note-sidebar"},[t.curBook.id?o("span",{staticClass:"btn add-note",on:{click:t.onAddNote}},[t._v("添加笔记")]):t._e(),t.curBook.id?t._e():o("span",{staticClass:"notebook-title"},[t._v("无笔记本")]),t.curBook.id?o("el-dropdown",{staticClass:"notebook-title",attrs:{placement:"bottom"},on:{command:t.handleCommand}},[o("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.curBook.title)),o("i",{staticClass:"iconfont icon-down"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.notebooks,(function(e){return o("el-dropdown-item",{key:e.id,attrs:{command:e.id}},[t._v(" "+t._s(e.title)+" ")])})),o("el-dropdown-item",{attrs:{command:"trash"}},[t._v("回收站")])],2)],1):t._e(),t._m(0),o("ul",{staticClass:"notes"},t._l(t.notes,(function(e){return o("li",{key:e.id},[o("router-link",{attrs:{to:"/note?noteId="+e.id+"&notebookId="+t.curBook.id}},[o("span",{staticClass:"date"},[t._v(t._s(e.updatedAtFriendly))]),o("span",{staticClass:"title"},[t._v(t._s(e.title))])])],1)})),0)],1)}),Q=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"menu"},[o("div",[t._v("更新时间")]),o("div",[t._v("标题")])])}],W={created:function(){var t=this;this.getNotebooks().then((function(){return t.setCurBook({curBookId:t.$route.query.notebookId}||{curBookId:t.notebooks[0].id}),t.getNotes({notebookId:t.curBook.id})})).then((function(){t.setCurNote({curNoteId:t.$route.query.noteId})}))},data:function(){return{}},computed:Object(d["a"])({},Object(l["c"])(["notebooks","notes","curBook","curNote"])),methods:Object(d["a"])(Object(d["a"])(Object(d["a"])({},Object(l["d"])(["setCurBook","setCurNote"])),Object(l["b"])(["getNotebooks","getNotes","addNote"])),{},{handleCommand:function(t){if("trash"===t)return this.$router.push({path:"/trash"});this.$store.commit("setCurBook",{curBookId:t}),this.getNotes({notebookId:t}),this.setCurNote({}),this.$router.replace({path:"/note",query:{notebookId:this.curBook.id}})},onAddNote:function(){this.addNote({notebookId:this.curBook.id})}})},X=W,Y=(o("0be3"),Object(p["a"])(X,K,Q,!1,null,"0c848160",null)),Z=Y.exports,tt=o("2ef0"),et=o.n(tt),ot=o("d4cd"),nt=o.n(ot),rt=new nt.a,st={components:{NoteSideBar:Z},data:function(){return{statusText:"笔记未改动",isShowPreview:!1}},created:function(){var t=this;I.getInfo().then((function(e){e.isLogin||t.$router.push({path:"/login"})}))},beforeRouteUpdate:function(t,e,o){this.setCurNote({curNoteId:t.query.noteId}),o()},computed:Object(d["a"])(Object(d["a"])({},Object(l["c"])(["notes","curNote","curBook"])),{},{previewContent:function(){return rt.render(this.curNote.content||"")}}),methods:Object(d["a"])(Object(d["a"])(Object(d["a"])({},Object(l["d"])(["setCurNote"])),Object(l["b"])(["updateNote","deleteNote"])),{},{onUpdateNote:et.a.debounce((function(){var t=this;this.updateNote({noteId:this.curNote.id,title:this.curNote.title,content:this.curNote.content}).then((function(){t.statusText="已保存"})).catch((function(){t.statusText="保存出错"}))}),300),onDeleteNote:function(){var t=this;this.deleteNote({noteId:this.curNote.id}).then((function(){t.$router.replace({path:"/note?notebookId=".concat(t.$store.state.curBookId)})}))}})},it=st,at=(o("267d"),Object(p["a"])(it,J,z,!1,null,"ba4a76ec",null)),ct=at.exports,ut=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail",attrs:{id:"trash"}},[o("div",{staticClass:"note-sidebar"},[o("h3",{staticClass:"notebook-title"},[t._v("回收站")]),t._m(0),o("ul",{staticClass:"notes"},t._l(t.trashNotes,(function(e){return o("li",{key:e.id},[o("router-link",{attrs:{to:"/trash?noteId="+e.id}},[o("span",{staticClass:"date"},[t._v(t._s(e.updatedAtFriendly))]),o("span",{staticClass:"title"},[t._v(t._s(e.title))])])],1)})),0)]),o("div",{staticClass:"note-detail"},[o("div",{staticClass:"note-bar"},[o("span",[t._v(" 创建日期: "+t._s(t.curTrashNote.createdAtFriendly))]),o("span",[t._v(" | ")]),o("span",[t._v(" 更新日期: "+t._s(t.curTrashNote.updatedAtFriendly))]),o("a",{staticClass:"btn action",on:{click:t.onRevert}},[t._v("恢复")]),o("a",{staticClass:"btn action",on:{click:t.onDelete}},[t._v("彻底删除")])]),o("div",{staticClass:"note-title"},[o("span",[t._v(t._s(t.curTrashNote.title))])]),o("div",{staticClass:"editor"},[o("div",{staticClass:"preview markdown-body",domProps:{innerHTML:t._s(t.compiledMarkdown)}})])])])},dt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"menu"},[o("div",[t._v("更新时间")]),o("div",[t._v("标题")])])}],lt=new nt.a,ft={name:"Login",data:function(){return{}},created:function(){var t=this;I.getInfo().then((function(e){e.isLogin||t.$router.push("/login")})),this.getTrashNotes().then((function(){t.setCurTrashNote({curTrashNoteId:t.$route.query.noteId})}))},computed:Object(d["a"])(Object(d["a"])({},Object(l["c"])(["trashNotes","curTrashNote"])),{},{compiledMarkdown:function(){return lt.render(this.curTrashNote.content||"")}}),methods:Object(d["a"])(Object(d["a"])(Object(d["a"])({},Object(l["d"])(["setCurTrashNote"])),Object(l["b"])(["deleteTrashNote","revertTrashNote","getTrashNotes"])),{},{onRevert:function(){this.revertTrashNote({noteId:this.curTrashNote.id})},onDelete:function(){this.deleteTrashNote({noteId:this.curTrashNote.id})}}),beforeRouteUpdate:function(t,e,o){this.setCurTrashNote({curTrashNoteId:t.query.noteId}),o()}},ht=ft,pt=(o("47dc"),Object(p["a"])(ht,ut,dt,!1,null,null,null)),vt=pt.exports;n["default"].use(B["a"]);var mt=B["a"].prototype.replace;B["a"].prototype.replace=function(t){return mt.call(this,t).catch((function(t){return t}))};var gt=[{path:"/",redirect:"/login"},{path:"/login",component:F},{path:"/notebooks",component:V},{path:"/note",component:ct},{path:"/trash",component:vt}],bt=new B["a"]({routes:gt}),kt=bt,Nt=(o("7db0"),o("4de4"),o("159b"),o("53ca"));function wt(t){var e="object"===Object(Nt["a"])(t)?t:new Date(t),o=e.getTime(),n=Date.now(),r=n-o,s="";switch(!0){case r<6e4:s="刚刚";break;case r<36e5:s=Math.floor(r/6e4)+"分钟前";break;case r<864e5:s=Math.floor(r/36e5)+"小时前";break;default:s=Math.floor(r/864e5)+"天前"}return s}var _t={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"},It={getAll:function(){return new Promise((function(t,e){w(_t.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.createdAt>e.createdAt})),e.data.forEach((function(t){t.createdAtFriendly=wt(t.createdAt),t.updatedAtFriendly=wt(t.updatedAt)})),t(e)})).catch((function(t){e(t)}))}))},updateNoteBook:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:""},o=e.title,n=void 0===o?"":o;return w(_t.UPDATE.replace(":id",t),"PATCH",{title:n})},deleteNoteBook:function(t){return w(_t.DELETE.replace(":id",t),"DELETE")},addNoteBook:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:""},e=t.title,o=void 0===e?"":e;return new Promise((function(t,e){w(_t.ADD,"POST",{title:o}).then((function(e){e.data.createdAtFriendly=wt(e.data.createdAt),e.data.updatedAtFriendly=wt(e.data.updatedAt),t(e)})).catch((function(t){e(t)}))}))}},Ct={GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"},Tt={getAll:function(t){var e=t.notebookId;return new Promise((function(t,o){w(Ct.GET.replace(":notebookId",e)).then((function(e){e.data.forEach((function(t){t.createdAtFriendly=wt(t.createdAt),t.updatedAtFriendly=wt(t.updatedAt)})),e.data=e.data.sort((function(t,e){return t.updatedAt<e.updatedAt})),t(e)})).catch((function(t){o(t)}))}))},updateNote:function(t,e){var o=t.noteId,n=e.title,r=e.content;return w(Ct.UPDATE.replace(":noteId",o),"PATCH",{title:n,content:r})},deleteNote:function(t){var e=t.noteId;return w(Ct.DELETE.replace(":noteId",e),"DELETE")},addNote:function(t){var e=t.notebookId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"",content:""},n=o.title,r=void 0===n?"":n,s=o.content,i=void 0===s?"":s;return new Promise((function(t,o){w(Ct.ADD.replace(":notebookId",e),"POST",{title:r,content:i}).then((function(e){e.data.createdAtFriendly=wt(e.data.createdAt),e.data.updatedAtFriendly=wt(e.data.updatedAt),t(e)})).catch((function(t){o(t)}))}))}},Et={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"},yt={getAll:function(){return new Promise((function(t,e){w(Et.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.createdAt>e.createdAt})),e.data.forEach((function(t){t.createdAtFriendly=wt(t.createdAt),t.updatedAtFriendly=wt(t.updatedAt)})),t(e)})).catch((function(t){e(t)}))}))},deleteNote:function(t){return w(Et.DELETE.replace(":noteId",t),"DELETE")},revertNote:function(t){return w(Et.REVERT.replace(":noteId",t),"PATCH")}};n["default"].use(l["a"]);var Ot=new l["a"].Store({state:{notebooks:[],curBookId:null,notes:[],curNoteId:null,user:null,trashNotes:[],curTrashNoteId:null},getters:{notebooks:function(t){return t.notebooks||[]},curBook:function(t){return t.curBookId?t.notebooks.find((function(e){return e.id==t.curBookId}))||{}:t.notebooks[0]||{}},notes:function(t){return t.notes},curNote:function(t){return t.curNoteId?t.notes.find((function(e){return e.id==t.curNoteId}))||{}:t.notes[0]||{}},username:function(t){return null===t.user?"未登录":t.user.username},slug:function(t){return null===t.user?"未":t.user.username[0]},trashNotes:function(t){return t.trashNotes||[]},curTrashNote:function(t){return t.trashNotes.find((function(e){return e.id==t.curTrashNoteId}))||{}}},mutations:{setNotebooks:function(t,e){t.notebooks=e.notebooks.reverse()},addNotebook:function(t,e){t.notebooks.unshift(e.notebook)},updateNotebook:function(t,e){var o=t.notebooks.find((function(t){return t.id==e.notebookId}))||{};o.title=e.title},deleteNotebook:function(t,e){t.notebooks=t.notebooks.filter((function(t){return t.id!=e.notebookId}))},setCurBook:function(t,e){t.curBookId=e.curBookId},setNote:function(t,e){t.notes=e.notes.reverse()},addNote:function(t,e){t.notes.unshift(e.note)},updateNote:function(t,e){var o=t.notes.find((function(t){return t.id==e.noteId}))||{};o.title=e.title,o.content=e.content},deleteNote:function(t,e){t.notes=t.notes.filter((function(t){return t.id!=e.noteId}))},setCurNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curNoteId=e.curNoteId},setUser:function(t,e){t.user=e.user},setTrashNotes:function(t,e){t.trashNotes=e.trashNotes},addTrashNote:function(t,e){t.trashNotes.unshift(e.note)},deleteTrashNote:function(t,e){t.trashNotes=t.trashNotes.filter((function(t){return t.id!=e.noteId}))},setCurTrashNote:function(t,e){t.curTrashNoteId=e.curTrashNoteId}},actions:{getNotebooks:function(t){var e=t.commit;return It.getAll().then((function(t){e("setNotebooks",{notebooks:t.data})}))},addNotebook:function(t,e){var o=t.commit;return It.addNoteBook({title:e.title}).then((function(t){o("addNotebook",{notebook:t.data})}))},updateNotebook:function(t,e){var o=t.commit;return It.updateNoteBook(e.notebookId,{title:e.title}).then((function(t){console.log(t),o("updateNotebook",{notebookId:e.notebookId,title:e.title})}))},deleteNotebook:function(t,e){var o=t.commit;return It.deleteNoteBook(e.notebookId).then((function(){o("deleteNotebook",{notebookId:e.notebookId})}))},getNotes:function(t,e){var o=t.commit;return Tt.getAll({notebookId:e.notebookId}).then((function(t){o("setNote",{notes:t.data})}))},addNote:function(t,e){var o=t.commit;return Tt.addNote({notebookId:e.notebookId},{title:e.title,content:e.content}).then((function(t){o("addNote",{note:t.data})}))},updateNote:function(t,e){var o=t.commit;return Tt.updateNote({noteId:e.noteId},{title:e.title,content:e.content}).then((function(t){o("updateNote",{noteId:t.noteId,title:t.title,content:e.content})}))},deleteNote:function(t,e){var o=t.commit;return Tt.deleteNote({noteId:e.noteId}).then((function(){o("deleteNote",{noteId:e.noteId})}))},login:function(t,e){var o=t.commit,n=e.username,r=e.password;return I.login({username:n,password:r}).then((function(t){console.log(t),o("setUser",{user:t.data})}))},register:function(t,e){var o=t.commit,n=e.username,r=e.password;return I.register({username:n,password:r}).then((function(t){o("setUser",{user:t.data}),k["Message"].success(t.msg)}))},checkLogin:function(t){var e=t.commit;return I.getInfo().then((function(t){t.isLogin?e("setUser",{user:t.data}):console.log("jump")}))},getTrashNotes:function(t){var e=t.commit;return yt.getAll().then((function(t){e("setTrashNotes",{trashNotes:t.data})}))},deleteTrashNote:function(t,e){var o=t.commit,n=e.noteId;return yt.deleteNote(n).then((function(){o("deleteTrashNote",{noteId:n})}))},revertTrashNote:function(t,e){var o=t.commit,n=e.noteId;return yt.revertNote(n).then((function(){o("deleteTrashNote",{noteId:n})}))}},modules:{}});o("0fae");n["default"].config.productionTip=!1,n["default"].use(N.a),new n["default"]({router:kt,store:Ot,render:function(t){return t(x)}}).$mount("#app")},"58fe":function(t,e,o){},"59c9":function(t,e,o){"use strict";o("be29")},6182:function(t,e,o){},6628:function(t,e,o){},"7d2c":function(t,e,o){t.exports=o.p+"img/inote.136ebc21.png"},"7d57":function(t,e,o){"use strict";o("58fe")},"85ec":function(t,e,o){},"95df":function(t,e,o){"use strict";o("219b")},be29:function(t,e,o){},f12b:function(t,e,o){"use strict";o("6628")},fec6:function(t,e,o){}});
//# sourceMappingURL=app.b608166b.js.map